window.__require=function t(e,o,n){function r(i,a){if(!o[i]){if(!e[i]){var p=i.split("/");if(p=p[p.length-1],!e[p]){var s="function"==typeof __require&&__require;if(!a&&s)return s(p,!0);if(c)return c(p,!0);throw new Error("Cannot find module '"+i+"'")}i=p}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return r(e[i][1][t]||t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({AnimCpt:[function(t,e,o){"use strict";cc._RF.push(e,"a8d279MOnZL2ZC4+G4XaKPO","AnimCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){var t=this,e=this.getComponent(cc.Animation);e&&e.play(),e.on("finished",function(){t.node.destroy()},this)},e.prototype.onPlay=function(){},c([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],AnimSystem:[function(t,e,o){"use strict";cc._RF.push(e,"a124dRJxYRAZomzWH5ilekN","AnimSystem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i},i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,c){function i(t){try{p(n.next(t))}catch(e){c(e)}}function a(t){try{p(n.throw(t))}catch(e){c(e)}}function p(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(i,a)}p((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,c,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(t){return function(e){return p([t,e])}}function p(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(a){c=[6,a],n=0}finally{o=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var p=t("./System"),s=cc._decorator,u=s.ccclass,l=(s.property,s.menu),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.playSkePrefab=function(t){return i(this,void 0,void 0,function(){return a(this,function(){return t=t||{},[2,new Promise(function(e){var o=t.prefab,n=t.parent,r=t.position,c=t.scale,i=t.animName,a=t.zIndex,p=t.timeScale,s=t.preCallback,u=t.endCallback||t.callback;if(n){var l=cc.instantiate(o);l.parent=n,l.zIndex=a||1e3,r&&(l.position=r),c&&(Array.isArray(c)?(l.scaleX=c[0],l.scaleY=c[1]):l.scale=c);var f=l.getComponent(sp.Skeleton);p&&(f.timeScale=p),(f=f||l.getComponentInChildren(sp.Skeleton)).setCompleteListener(function(){u&&u(l),l.destroy(),e()}),i&&(s&&s(l),f.setAnimation(0,i,!1))}else e()})]})})},e.prototype.playSkePrefabs=function(t){return i(this,void 0,void 0,function(){var e,o;return a(this,function(n){switch(n.label){case 0:e=0,n.label=1;case 1:return e<t.length?(o=t[e],e>=t.length-1?[4,this.playSkePrefab(o)]:[3,3]):[3,5];case 2:return n.sent(),[3,4];case 3:this.playSkePrefab(o),n.label=4;case 4:return e++,[3,1];case 5:return[2]}})})},c([u,l("ECS/\u7cfb\u7edf/\u52a8\u753b\u7cfb\u7edf")],e)}(p.default);o.default=f,cc._RF.pop()},{"./System":"System"}],AudioCfgCpt:[function(t,e,o){"use strict";cc._RF.push(e,"61fccHC8Y5MKqmJs9/1JcgJ","AudioCfgCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.AudioCfgItem=void 0;var i=cc._decorator,a=i.ccclass,p=i.property,s=i.menu,u=function(){function t(){this.key="",this.audio=null}return c([p({displayName:"Key"})],t.prototype,"key",void 0),c([p({type:cc.AudioClip,displayName:"MP3"})],t.prototype,"audio",void 0),c([a("AudioCfgItem")],t)}();o.AudioCfgItem=u;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config=[],e}return r(e,t),c([p({type:[u]})],e.prototype,"config",void 0),c([a,s("ECS/\u914d\u7f6e/\u58f0\u97f3\u914d\u7f6e")],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],BrickCpt:[function(t,e,o){"use strict";cc._RF.push(e,"d27b77KET5Npbp2EufTvj7f","BrickCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BrickState=void 0;var i,a=cc._decorator,p=a.ccclass,s=a.property;(function(t){t.check="check",t.droping="drop",t.fixing="fix",t.drag="drag"})(i=o.BrickState||(o.BrickState={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=i.check,e.mapCpt=null,e.mapItem=null,e.occupant=null,e.isBoom=!1,e.isReady=!1,e.dragMoving=!1,e.touchNode=null,e.vec=cc.v3(0,-1e3),e.frameCount=0,e.fixTime=0,e}return r(e,t),Object.defineProperty(e.prototype,"touchBox",{get:function(){return this.touchNode.getBoundingBoxToWorld()},enumerable:!1,configurable:!0}),e.prototype.updatePos=function(){this.node.position=this.mapItem.node.position},c([s(cc.Node)],e.prototype,"touchNode",void 0),c([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],BtnEvtCpt:[function(t,e,o){"use strict";cc._RF.push(e,"165e40IayFO1Zy9FoEUV5WV","BtnEvtCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Event/EventManager"),a=cc._decorator,p=a.ccclass,s=a.property,u=a.menu,l=a.requireComponent,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="event_key",e.isPress=!1,e.longPressKey="event_key",e.longPressTime=2,e.longPressAnimPrefab=null,e._isPressTouch=!1,e}return r(e,t),e.prototype.onLoad=function(){var t=this,e=function(){t.unschedule(o),t._isPressTouch=!0,cc.isValid(t.pressAnimNode)||t.pressAnimNode.destroy(),i.default.inst.dispatch(t.longPressKey,t.node.getComponent(cc.Button))},o=function(){t.longPressAnimPrefab&&(t.pressAnimNode=cc.instantiate(t.longPressAnimPrefab),t.pressAnimNode.parent=t.node)};this.node.on(cc.Node.EventType.TOUCH_START,function(){if(!t.getComponent(cc.Button).interactable)return!1;t._isPressTouch=!1,t.isPress&&(t.scheduleOnce(o,.2),t.scheduleOnce(e,t.longPressTime))}),this.node.on(cc.Node.EventType.TOUCH_END,function(){if(!t.getComponent(cc.Button).interactable)return!1;t.isPress&&(t.unschedule(o),cc.isValid(t.pressAnimNode)&&t.pressAnimNode.destroy(),t.unschedule(e)),t._isPressTouch||i.default.inst.dispatch(t.key,t.node.getComponent(cc.Button)),t._isPressTouch=!1}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){if(!t.getComponent(cc.Button).interactable)return!1;t.isPress&&(t.unschedule(o),cc.isValid(t.pressAnimNode)&&t.pressAnimNode.destroy(),t.unschedule(e))})},c([s],e.prototype,"key",void 0),c([s(cc.Boolean)],e.prototype,"isPress",void 0),c([s({visible:function(){return 1==this.isPress}})],e.prototype,"longPressKey",void 0),c([s({visible:function(){return 1==this.isPress}})],e.prototype,"longPressTime",void 0),c([s({type:cc.Prefab,visible:function(){return 1==this.isPress}})],e.prototype,"longPressAnimPrefab",void 0),c([p,u("ECS/\u53d1\u5c04\u5668/\u6309\u94ae\u53d1\u5c04\u5668"),l(cc.Button)],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Event/EventManager":"EventManager"}],ButtonEventCpt:[function(t,e,o){"use strict";cc._RF.push(e,"e059fYHEfZGjKfD5jpJww7h","ButtonEventCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Event/EventManager"),a=cc._decorator,p=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="event_key",e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.node.on("click",function(){i.default.inst.dispatch(t.key)},this)},c([s],e.prototype,"key",void 0),c([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Event/EventManager":"EventManager"}],CardBaseCpt:[function(t,e,o){"use strict";cc._RF.push(e,"816b6Wt3zpJOYJNwEjnTMYL","CardBaseCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._layout=null,e._canTouch=!1,e}return r(e,t),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(t){var e=this;this._layout&&(this._layout.list=this._layout.list.filter(function(t){return t!==e})),this._layout=t,this._layout.list.push(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canTouch",{get:function(){return this._canTouch},set:function(t){this._canTouch=t,t?(this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)):(this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this))},enumerable:!1,configurable:!0}),e.prototype.onTouchStart=function(){},e.prototype.onTouchMove=function(){},e.prototype.onTouchEnd=function(){},c([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],CardLayoutCpt:[function(t,e,o){"use strict";cc._RF.push(e,"ee3e9fVfyZGPIVJtr2YqFda","CardLayoutCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="",e.list=[],e.padding=0,e.cirPoint=null,e}return r(e,t),e.prototype.getAttrTByLayout=function(t,e){e=e||{};var o=this.list.indexOf(t),n=this.list.length,r=this.node.convertToWorldSpaceAR(this.cirPoint),c=t.node.parent.convertToNodeSpaceAR(r),i=this.padding*Math.PI/180,a=cc.Vec2.ZERO.sub(this.cirPoint);return a.rotateSelf(i*(.5*(n-1)-o)),e.rotate=180*a.signAngle(cc.Vec2.UP)/Math.PI,e.pos=c.add(a),e.zIndex=o,e},e.prototype.updateView=function(){for(var t=0,e=this.list;t<e.length;t++){var o=e[t];if(o){o.node.stopAllActions();var n=this.getAttrTByLayout(o);null!=n.scale&&(o.node.scale=n.scale),null!=n.pos&&o.node.setPosition(n.pos),null!=n.pos&&(o.node.angle=-n.rotate),null!=n.zIndex&&(o.node.zIndex=n.zIndex)}}},e.prototype.removeRandomCard=function(){return this.list.length<=0?null:this.list.splice(Math.floor(Math.random()*this.list.length),1)[0]},c([p],e.prototype,"key",void 0),c([p],e.prototype,"padding",void 0),c([p(cc.Vec2)],e.prototype,"cirPoint",void 0),c([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],CardTownGameWorld:[function(t,e,o){"use strict";cc._RF.push(e,"81601vVbidN36bH4sNDXkkD","CardTownGameWorld");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Lemon/Script/ECS/World"),a=t("../../Lemon/Script/Event/EventCpt"),p=t("./CardBaseCpt"),s=t("./CardLayoutCpt"),u=t("./MoraleCpt"),l=cc._decorator,f=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.morale=0,e.allCards=[],e}return r(e,t),e.prototype.onInit=function(){this.eventCpt=this.addComponent(a.default),this.moraleCpt=this.getCpt(u.default),this.handLayout=this.getCptByKey(s.default,"hand"),this.readyLayout=this.getCptByKey(s.default,"ready"),this.usedLayout=this.getCptByKey(s.default,"used");for(var t=0;t<10;t++){var e=cc.instantiate(this.getPrefab("CardBase"));e.parent=this.node;var o=e.getComponent(p.default);o.layout=this.readyLayout,this.allCards.push(o)}this.readyLayout.updateView(),this.moraleCpt.morale=5,this.eventCpt.on("card_touch_start",function(){}),this.eventCpt.on("card_touch_end",function(){})},e.prototype.start=function(){this.nextBout(4)},e.prototype.nextBout=function(t){if(this.moraleCpt.morale--,this.moraleCpt.morale>0){if(this.readyLayout.list.length<t)for(var e=0,o=this.usedLayout.list;e<o.length;e++)o[e].layout=this.readyLayout;this.readyLayout.updateView();for(var n=0;n<t;n++){var r=this.readyLayout.removeRandomCard();r.canTouch=!0,r&&(r.layout=this.handLayout)}this.readyLayout.updateView(),this.handLayout.updateView()}else cc.log("Over !")},c([h],e.prototype,"morale",void 0),c([f],e)}(i.default);o.default=d,cc._RF.pop()},{"../../Lemon/Script/ECS/World":"World","../../Lemon/Script/Event/EventCpt":"EventCpt","./CardBaseCpt":"CardBaseCpt","./CardLayoutCpt":"CardLayoutCpt","./MoraleCpt":"MoraleCpt"}],DialogCpt:[function(t,e,o){"use strict";cc._RF.push(e,"04a6e2sf29Cs6ZasES1qzTK","DialogCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentLabel=null,e._content="",e.okButton=null,e}return r(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.contentLabel&&(this.contentLabel.string=t)},enumerable:!1,configurable:!0}),c([p(cc.Label)],e.prototype,"contentLabel",void 0),c([p(cc.Button)],e.prototype,"okButton",void 0),c([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],EventCpt:[function(t,e,o){"use strict";cc._RF.push(e,"fa276y24J5NRLWBgV8tAAcZ","EventCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./EventManager"),a=cc._decorator,p=a.ccclass,s=(a.property,a.menu),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._events=[],e}return r(e,t),e.prototype.onLoad=function(){this._eventManager=i.default.inst},e.prototype.on=function(t,e,o){var n=this._eventManager.on(t,e,o);return this._events.push(n),n},e.prototype.once=function(t,e,o){var n=this._eventManager.once(t,e,o);return this._events.push(n),n},e.prototype.off=function(t){this._eventManager.off(t);for(var e=this._events.length-1;e>=0;e--)if(t===this._events[e]){this._events.splice(e,1);break}},e.prototype.removeAll=function(){for(var t=0;t<this._events.length;t++){var e=this._events[t];this._eventManager.off(e)}this._events=[]},e.prototype.dispatch=function(t,e,o,n,r,c){this._eventManager.dispatch(t,e,o,n,r,c)},e.prototype.onDestroy=function(){this.removeAll()},c([p,s("\u4e8b\u4ef6/\u4e8b\u4ef6\u7ec4\u4ef6")],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./EventManager":"EventManager"}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"f224bh1NClHLZobujFKpJZO","EventManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventObject=void 0;var n=function(t,e,o,n){this.type=t,this.callback=e,this.target=o,this.callOnce=n};o.EventObject=n;var r=function(){function t(){this._pool={},this._eventTarget=new cc.EventTarget}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.addListener=function(t,e,o,r){var c=this;void 0===r&&(r=!1);var i=new n(t,e,o,r);return this._pool[t]||(this._pool[t]=[],this._eventTarget.on(t,function(e,o,n,r,i){c._onListener(t,e,o,n,r,i)},this)),this._pool[t].push(i),i},t.prototype.on=function(t,e,o){return this.addListener(t,e,o,!1)},t.prototype.once=function(t,e,o){return this.addListener(t,e,o,!0)},t.prototype._onListener=function(t,e,o,n,r,c){for(var i=this._pool[t],a=0,p=i.length;a<p;){var s=i[a],u=s.target;s.callback&&s.callback.call(u,e,o,n,r,c),s.callOnce&&(i.splice(a,1),a--,p--),a++}},t.prototype.off=function(t){if(t){for(var e=this._pool[t.type],o=e.length-1;o>=0;o--)if(t===e[o])return e.splice(o,1),!0;return!1}},t.prototype.removeAll=function(){var t=this;for(var e in this._pool)this._pool[e].forEach(function(e){t.off(e)})},t.prototype.dispatch=function(t,e,o,n,r,c){this._eventTarget.emit(t,e,o,n,r,c)},t._inst=null,t}();o.default=r,cc._RF.pop()},{}],FSM:[function(t,e,o){"use strict";cc._RF.push(e,"3cb1eCxuqZCEYNKa6oymQBe","FSM");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateList=[],e.currentStateData=null,e.nextStateName="",e}return r(e,t),Object.defineProperty(e.prototype,"currentState",{get:function(){return this.currentStateData.state},enumerable:!1,configurable:!0}),e.prototype.addState=function(t,e,o,n){this.stateList.push({state:t,onStartFunc:e,onUpdateFunc:o,onEndFunc:n})},e.prototype.update=function(){for(var t=null,e=0,o=this.stateList;e<o.length;e++){var n=o[e];this.nextStateName==n.state&&(t=n)}this.nextStateName="",t&&(this.currentStateData&&this.currentStateData.onEndFunc&&this.currentStateData.onEndFunc(this),this.currentStateData=t,t.onStartFunc&&t.onStartFunc(this)),this.currentStateData&&this.currentStateData.onUpdateFunc&&this.currentStateData.onUpdateFunc(this)},c([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],FoodCpt:[function(t,e,o){"use strict";cc._RF.push(e,"b1e19GoWI5A/5NISAGJwSFx","FoodCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueLabel=null,e._value=0,e}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.valueLabel.string=t.toString()},enumerable:!1,configurable:!0}),c([p(cc.Label)],e.prototype,"valueLabel",void 0),c([p],e.prototype,"_value",void 0),c([p],e.prototype,"value",null),c([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],GameMapCpt:[function(t,e,o){"use strict";cc._RF.push(e,"3e55drDLGFETYEfAheYJ6B5","GameMapCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i},i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,c){function i(t){try{p(n.next(t))}catch(e){c(e)}}function a(t){try{p(n.throw(t))}catch(e){c(e)}}function p(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(i,a)}p((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,c,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(t){return function(e){return p([t,e])}}function p(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(a){c=[6,a],n=0}finally{o=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GameMapState=void 0;var p,s=t("./GameMapItem"),u=t("./BrickCpt"),l=t("../../../Lemon/Script/Event/EventManager"),f=t("../../../Lemon/Script/FSM/FSM"),h=t("../../../Lemon/Script/Tools"),d=t("../Items/HeroCpt"),y=t("../Items/MonsterCpt"),_=t("../Items/TotemCpt"),v=t("../Items/WeaponCpt"),b=cc._decorator,g=b.ccclass,m=b.property;(function(t){t.idel="idel",t.filling="filling",t.handling="handling",t.waiting="waiting"})(p=o.GameMapState||(o.GameMapState={}));var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.row=0,e.col=0,e.itemW=0,e.itemH=0,e.graphics=null,e.mapItemPrefab=null,e.brickPrefab=null,e.heroPrefab=null,e._lineBricks=[],e.map=new Array,e.brickList=new Array,e}return r(e,t),Object.defineProperty(e.prototype,"active",{set:function(t){for(var e=0,o=this.brickList;e<o.length;e++)o[e].node.active=t;for(var n=0;n<this.row;n++)for(var r=0;r<this.col;r++)this.map[n][r].node.active=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.graphics.node.zIndex=9900,this.initMap(),this.initFsm()},e.prototype.run=function(t,e){return i(this,void 0,void 0,function(){var o,n;return a(this,function(r){switch(r.label){case 0:return this.itemsConfig=e,this.clear(),[4,h.default.delay(this,this.fillBricks())];case 1:return r.sent(),t.parent=this.node,t.zIndex=9e3,o=Math.floor(Math.random()*this.row),n=Math.floor(Math.random()*this.col),this.map[o][n].brick.occupant&&this.map[o][n].brick.occupant.destroy(),this.map[o][n].brick.occupant=t,t.position=this.map[o][n].node.position,this.fsm.nextStateName=p.waiting,[2]}})})},e.prototype.initMap=function(){for(var t=0;t<this.row;t++){this.map[t]=new Array;for(var e=0;e<this.col;e++){var o=cc.instantiate(this.mapItemPrefab);o.parent=this.node,o.position=cc.v3(cc.v3((-.5*(this.row-1)+t)*this.itemW,(.5*-(this.col-1)+e)*this.itemH)).add(this.node.position);var n=o.getComponent(s.default);this.map[t][e]=n}}for(var r=0;r<this.row;r++)for(var c=0;c<this.col;c++){var i=this.map[r][c];i.up=this.map[r][c+1],i.down=this.map[r][c-1],this.map[r-1]&&(i.left=this.map[r-1][c],i.leftUp=this.map[r-1][c+1],i.leftDown=this.map[r-1][c-1]),this.map[r+1]&&(i.right=this.map[r+1][c],i.rightUp=this.map[r+1][c+1],i.rightDown=this.map[r+1][c-1])}},e.prototype.initFsm=function(){var t=this;this.fsm=this.addComponent(f.default),this.fsm.addState(p.idel,null,null,null),this.fsm.addState(p.filling,function(e){return i(t,void 0,void 0,function(){var t,o,n,r,c,i,s,u;return a(this,function(a){switch(a.label){case 0:for(t=[],o=function(t){return t.brick&&t.down&&!t.down.brick?(t.down.brick=t.brick,t.brick=null,o(t.down)):t},n=0;n<this.col;n++)for(r=0;r<this.row;r++)(c=o(this.map[r][n]))!=this.map[r][n]&&t.push(c);for(i=0,s=t;i<s.length;i++)u=s[i],cc.tween(u.brick.node).to(.2,{position:u.node.position}).start(),cc.tween(u.brick.occupant).to(.2,{position:u.node.position}).start();return[4,h.default.delay(this,.22)];case 1:return a.sent(),[4,h.default.delay(this,this.fillBricks())];case 2:return a.sent(),e.nextStateName=p.waiting,[2]}})})},null,null),this.fsm.addState(p.waiting,function(){l.default.inst.dispatch("game_next"),t.updateMapState(),t.node.on(cc.Node.EventType.TOUCH_START,t.onTouchStartCallback,t,!0),t.node.on(cc.Node.EventType.TOUCH_MOVE,t.onTouchMoveCallback,t,!0),t.node.on(cc.Node.EventType.TOUCH_END,t.onTouchEndCallback,t,!0),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t.onTouchEndCallback,t,!0)},null,function(){t.node.off(cc.Node.EventType.TOUCH_START,t.onTouchStartCallback,t,!0),t.node.off(cc.Node.EventType.TOUCH_MOVE,t.onTouchMoveCallback,t,!0),t.node.off(cc.Node.EventType.TOUCH_END,t.onTouchEndCallback,t,!0),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t.onTouchEndCallback,t,!0)}),this.fsm.addState(p.handling,function(e){return i(t,void 0,void 0,function(){var t,o,n,r,c,i=this;return a(this,function(s){switch(s.label){case 0:if(this._lineBricks.length<=1)return e.nextStateName=p.waiting,[2];t=this._lineBricks[0].occupant.getComponent(d.default),o=0,n=function(e){var n,c,p,s,u;return a(this,function(a){switch(a.label){case 0:return e>0?(t.power--,n=r._lineBricks[e-1],(c=r._lineBricks[e]).occupant&&((p=c.occupant.getComponent(y.default))&&((s=p.totalValue-o)>0&&(t.hp-=s),o=0,t.gold+=2,t.feed+=2),(u=c.occupant.getComponent(v.default))&&(o=u.value),c.occupant.destroy()),n.occupant=null,c.occupant=t.node,cc.tween(t.node).to(.1,{position:c.node.position}).call(function(){i.removeBrick(n.mapItem),i.updateMapState()}).start(),[4,h.default.delay(r,.25)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})},r=this,c=0,s.label=1;case 1:return c<this._lineBricks.length?[5,n(c)]:[3,4];case 2:s.sent(),s.label=3;case 3:return c++,[3,1];case 4:return t.feed--,e.nextStateName=p.filling,[2]}})})},null,null),this.clear()},e.prototype.clear=function(){this.fsm.nextStateName=p.idel,this.brickList=[];for(var t=0;t<this.col;t++)for(var e=0;e<this.row;e++)if(this.map[e][t].brick){var o=this.map[e][t].brick;this.map[e][t].brick=null,o.occupant.destroy(),o.node.destroy()}},e.prototype.fillBricks=function(){for(var t=0,e=0;e<this.col;e++)for(var o=function(o){if(!n.map[o][e].brick){var r=n.createBrick();n.addBrick(r,n.map[o][e]),r.node.position=n.map[o][e].node.position,r.occupant&&(r.occupant.position=n.map[o][e].node.position),r.node.scale=.1;var c=cc.sequence(cc.delayTime(.02*t++),cc.spawn(cc.scaleTo(.1,1),cc.rotateBy(.1,1080)),cc.callFunc(function(){r.node.angle=0,r.updatePos()}));r.node.runAction(c)}},n=this,r=0;r<this.row;r++)o(r);return.05*t},e.prototype.onTouchStartCallback=function(t){this._lineBricks=[];for(var e=0,o=this.brickList;e<o.length;e++){var n=o[e];n.touchBox.contains(t.getLocation())&&n.occupant&&n.occupant.getComponent(d.default)&&this._lineBricks.push(n)}},e.prototype.onTouchMoveCallback=function(t){if(!(this._lineBricks.length<=0)){for(var e=this._lineBricks[0],o=this._lineBricks[this._lineBricks.length-1],n=this._lineBricks[this._lineBricks.length-2],r=null,c=0,i=this.brickList;c<i.length;c++){var a=i[c];if(a.touchBox.contains(t.getLocation())){r=a;break}}if(r&&o!=r){this._lineBricks.indexOf(r)>=0?r==n&&this._lineBricks.pop():this._lineBricks.length>e.occupant.getComponent(d.default).power||(o.mapItem.left&&o.mapItem.left.brick==r?this._lineBricks.push(r):o.mapItem.right&&o.mapItem.right.brick==r?this._lineBricks.push(r):o.mapItem.up&&o.mapItem.up.brick==r?this._lineBricks.push(r):o.mapItem.down&&o.mapItem.down.brick==r?this._lineBricks.push(r):o.mapItem.leftUp&&o.mapItem.leftUp.brick==r?this._lineBricks.push(r):o.mapItem.leftDown&&o.mapItem.leftDown.brick==r?this._lineBricks.push(r):o.mapItem.rightUp&&o.mapItem.rightUp.brick==r?this._lineBricks.push(r):o.mapItem.rightDown&&o.mapItem.rightDown.brick==r&&this._lineBricks.push(r)),this.graphics.clear(),this.graphics.moveTo(e.node.position.x,e.node.position.y);for(var p=0,s=this._lineBricks;p<s.length;p++){var u=s[p];this.graphics.lineTo(u.node.position.x,u.node.position.y)}this.graphics.stroke()}}},e.prototype.onTouchEndCallback=function(){this.graphics.clear(),this.fsm.nextStateName=p.handling},e.prototype.getMapItem=function(t){for(var e=null,o=0;o<this.row;o++)for(var n=0;n<this.col;n++)this.map[o][n]&&this.map[o][n].node.getBoundingBox().contains(cc.v2(t))&&(e=this.map[o][n]);return e},e.prototype.getIdelMapItem=function(){for(var t=0;t<this.col;t++)for(var e=0;e<this.row;e++)if(!this.map[e][t].brick)return this.map[e][t]},e.prototype.addBrick=function(t,e){t.mapCpt=this,t.mapItem=e,e.brick=t,this.brickList.push(t)},e.prototype.removeBrick=function(t){var e=t.brick;t.brick=null,this.brickList=this.brickList.filter(function(t){return e!==t}),cc.tween(e.node).to(.1,{scale:0}).call(function(){e.node.destroy()}).start()},e.prototype.createBrick=function(){var t=cc.instantiate(this.brickPrefab);t.parent=this.node,t.position=cc.v3(0,0,0);for(var e=[],o=0,n=0,r=this.itemsConfig;n<r.length;n++){var c=o+(l=r[n]).weight;l.limit=[o,c],o=c,e.push(l)}for(var i=Math.random()*o,a=null,p=0,s=this.itemsConfig;p<s.length;p++){var l;i>=(l=s[p]).limit[0]&&i<l.limit[1]&&(a=l)}if(a.prefab){var f=cc.instantiate(a.prefab);f.parent=this.node,f.zIndex=9e3,t.getComponent(u.default).occupant=f}return t.getComponent(u.default)},e.prototype.updateMapState=function(){for(var t=0;t<this.row;t++)for(var e=function(e){var n=o.map[t][e],r=o.fliterOccupant(n,y.default);r&&(r.extraValue=0,o.fliterOccupant(n.up,_.default,function(){r.extraValue+=1}),o.fliterOccupant(n.down,_.default,function(){r.extraValue+=1}),o.fliterOccupant(n.left,_.default,function(){r.extraValue+=1}),o.fliterOccupant(n.right,_.default,function(){r.extraValue+=1}))},o=this,n=0;n<this.col;n++)e(n)},e.prototype.fliterOccupant=function(t,e,o){if(t&&t.brick&&t.brick.occupant){var n=t.brick.occupant.getComponent(e);return n&&o&&o(n),n}},c([m],e.prototype,"row",void 0),c([m],e.prototype,"col",void 0),c([m],e.prototype,"itemW",void 0),c([m],e.prototype,"itemH",void 0),c([m(cc.Graphics)],e.prototype,"graphics",void 0),c([m(cc.Prefab)],e.prototype,"mapItemPrefab",void 0),c([m(cc.Prefab)],e.prototype,"brickPrefab",void 0),c([m(cc.Prefab)],e.prototype,"heroPrefab",void 0),c([g],e)}(cc.Component);o.default=C,cc._RF.pop()},{"../../../Lemon/Script/Event/EventManager":"EventManager","../../../Lemon/Script/FSM/FSM":"FSM","../../../Lemon/Script/Tools":"Tools","../Items/HeroCpt":"HeroCpt","../Items/MonsterCpt":"MonsterCpt","../Items/TotemCpt":"TotemCpt","../Items/WeaponCpt":"WeaponCpt","./BrickCpt":"BrickCpt","./GameMapItem":"GameMapItem"}],GameMapItem:[function(t,e,o){"use strict";cc._RF.push(e,"ae32cr/We9JRYZW7AtCyo7A","GameMapItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.busySprite=null,e.cornerSprite=null,e}return r(e,t),Object.defineProperty(e.prototype,"isSelect",{get:function(){return this.busySprite.node.active},set:function(t){this.busySprite.node.active=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"brick",{get:function(){return this._brick},set:function(t){this._brick=t,t&&(t.mapItem=this)},enumerable:!1,configurable:!0}),c([p(cc.Sprite)],e.prototype,"busySprite",void 0),c([p(cc.Sprite)],e.prototype,"cornerSprite",void 0),c([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],GameWorld:[function(t,e,o){"use strict";cc._RF.push(e,"70d3ct8Wv1Ci44RbuWBAMTu","GameWorld");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Lemon/Script/ECS/KeyCpt"),a=t("../../Lemon/Script/ECS/World"),p=t("../../Lemon/Script/Event/EventCpt"),s=t("../../Lemon/Script/Popup/PopupManager"),u=t("./Items/HeroCpt"),l=t("./Maps/GameMapCpt"),f=cc._decorator,h=f.ccclass,d=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isGameOver=!1,e}return r(e,t),e.prototype.onInit=function(){var t=this;this.mapCpt=this.getCpt(l.default),this.eventCpt=this.node.addComponent(p.default),this.eventCpt.on("bricks_boom",this.onBricksBoom.bind(this)),this.eventCpt.on("game_next",this.onWorldNext.bind(this)),this.eventCpt.on("game_test",function(){t.isGameOver=!0,s.default.inst.add(t.getPrefab("PopupGameOver"))}),this.eventCpt.on("game_restart",function(){s.default.inst.removeAll(),t.start()})},e.prototype.start=function(){this.isGameOver=!1;var t=cc.instantiate(this.getPrefab("Hero"));this.heroCpt=t.getComponent(u.default),this.heroCpt.goldLabel=this.getCptByKey(i.default,"label_gold").getComponent(cc.Label),this.heroCpt.feedLabel=this.getCptByKey(i.default,"label_feed").getComponent(cc.Label),this.heroCpt.powerLabel=this.getCptByKey(i.default,"label_power").getComponent(cc.Label),this.heroCpt.maxFeed=5,this.heroCpt.feed=5,this.heroCpt.gold=0,this.heroCpt.maxHp=10,this.heroCpt.hp=10,this.heroCpt.power=3,this.mapCpt.run(t,[{key:"none",prefab:null,weight:2},{key:"weapon",prefab:this.getPrefab("Weapon"),weight:3},{key:"monster",prefab:this.getPrefab("Monster"),weight:4},{key:"totem",prefab:this.getPrefab("Totem"),weight:2}])},e.prototype.onUpdate=function(){},e.prototype.onWorldNext=function(){(this.heroCpt.feed<=0||this.heroCpt.hp<=0)&&(this.isGameOver=!0,s.default.inst.add(this.getPrefab("PopupGameOver"))),this.heroCpt.power<=0?this.heroCpt.power=4:this.heroCpt.power=3},e.prototype.onBricksBoom=function(){},c([h],e)}(a.default));o.default=d,cc._RF.pop()},{"../../Lemon/Script/ECS/KeyCpt":"KeyCpt","../../Lemon/Script/ECS/World":"World","../../Lemon/Script/Event/EventCpt":"EventCpt","../../Lemon/Script/Popup/PopupManager":"PopupManager","./Items/HeroCpt":"HeroCpt","./Maps/GameMapCpt":"GameMapCpt"}],GoldCpt:[function(t,e,o){"use strict";cc._RF.push(e,"1644fFnGtJJpoQT7wg4acoC","GoldCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),c([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],HeroCpt:[function(t,e,o){"use strict";cc._RF.push(e,"540b4bRs8NAzY4wHnnMk+VP","HeroCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.feedLabel=null,e.hpLabel=null,e.goldLabel=null,e.powerLabel=null,e._gold=0,e.maxFeed=0,e._feed=0,e.maxHp=0,e._hp=0,e._power=0,e}return r(e,t),Object.defineProperty(e.prototype,"gold",{get:function(){return this._gold},set:function(t){this._gold=t,this.goldLabel&&(this.goldLabel.string=t.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"feed",{get:function(){return this._feed},set:function(t){this._feed=Math.min(this.maxFeed,t),this.feedLabel&&(this.feedLabel.string=this._feed.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(t){this._hp=Math.min(this.maxHp,t),this.hpLabel&&(this.hpLabel.string=this._hp.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){return this._power},set:function(t){this._power=t,this.powerLabel&&(this.powerLabel.string=this._power.toString())},enumerable:!1,configurable:!0}),c([p(cc.Label)],e.prototype,"feedLabel",void 0),c([p(cc.Label)],e.prototype,"hpLabel",void 0),c([p(cc.Label)],e.prototype,"goldLabel",void 0),c([p(cc.Label)],e.prototype,"powerLabel",void 0),c([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],IdCpt:[function(t,e,o){"use strict";cc._RF.push(e,"d688aPaKmJGEK/8OIcFjhFd","IdCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e}return r(e,t),c([p],e.prototype,"id",void 0),c([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],KeyCpt:[function(t,e,o){"use strict";cc._RF.push(e,"ee7d7MVZQ1EgZaqh3MlZ8UL","KeyCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=i.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="",e}return r(e,t),c([p],e.prototype,"key",void 0),c([a,s("ECS/key")],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],MonsterCpt:[function(t,e,o){"use strict";cc._RF.push(e,"a2362OXAntCTqne+S6aqbRT","MonsterCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueLabel=null,e.buffNode=null,e._extraValue=0,e._value=0,e}return r(e,t),Object.defineProperty(e.prototype,"extraValue",{get:function(){return this._extraValue},set:function(t){this._extraValue=t,this.updateView()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.updateView()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalValue",{get:function(){return this.value+this.extraValue},enumerable:!1,configurable:!0}),e.prototype.updateView=function(){this.valueLabel.string=(this.value+this.extraValue).toString(),this.buffNode&&(this.buffNode.active=this.extraValue>0)},e.prototype.onLoad=function(){Math.random()>.5?this.value+=1:this.value-=1},c([p(cc.Label)],e.prototype,"valueLabel",void 0),c([p(cc.Node)],e.prototype,"buffNode",void 0),c([p],e.prototype,"_value",void 0),c([p],e.prototype,"value",null),c([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],MoraleCpt:[function(t,e,o){"use strict";cc._RF.push(e,"59e9fgXOr9KJKQTl/2YcCI7","MoraleCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueLabel=null,e._morale=0,e}return r(e,t),Object.defineProperty(e.prototype,"morale",{get:function(){return this._morale},set:function(t){this._morale=t,this.valueLabel&&(this.valueLabel.string=t.toString())},enumerable:!1,configurable:!0}),e.prototype.start=function(){},c([p(cc.Label)],e.prototype,"valueLabel",void 0),c([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],PopupCpt:[function(t,e,o){"use strict";cc._RF.push(e,"34d848p/DhEea5oaPZOrtZ5","PopupCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=i.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchClose=!0,e}return r(e,t),c([p],e.prototype,"touchClose",void 0),c([a,s("\u7ec4\u4ef6/\u5f39\u7a97")],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],PopupManager:[function(t,e,o){"use strict";cc._RF.push(e,"f3a11T+E5tF0JbaqqQrXwxj","PopupManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Component/PopupCpt"),r=function(){function t(){this.popupCptList=[],this.maskNode=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topPopup",{get:function(){return this.popupCptList[this.popupCptList.length-1]},enumerable:!1,configurable:!0}),t.prototype.openMask=function(){var t=this;if(this.maskNode)return this.maskNode;this.maskNode=new cc.Node,this.maskNode.parent=cc.director.getScene();var e=this.maskNode.addComponent(cc.Graphics);e.fillColor=new cc.Color(0,0,0,155),e.fillRect(-cc.winSize.width/2,-cc.winSize.height/2,cc.winSize.width,cc.winSize.height),this.maskNode.width=cc.winSize.width,this.maskNode.height=cc.winSize.height,this.maskNode.position=cc.v3(cc.winSize.width/2,cc.winSize.height/2,0),this.maskNode.active=!0,this.maskNode.on(cc.Node.EventType.TOUCH_END,function(){t.topPopup.touchClose&&t.removeTopPopup()},this)},t.prototype.closeMask=function(){this.maskNode&&this.maskNode.destroy()},t.prototype.removeTopPopup=function(){var t=this.popupCptList.pop();t&&t.node.destroy(),this.updatePopup()},t.prototype.updatePopup=function(){if(this.popupCptList.length>0){this.openMask();for(var e=0;e<this.popupCptList.length;e++)this.popupCptList[e].node.zIndex=t.POPUP_ZINDEX+2*e,e==this.popupCptList.length-1&&(this.maskNode.zIndex=t.POPUP_ZINDEX+2*e-1)}else this.closeMask()},t.prototype.add=function(t){var e=null;t instanceof cc.Prefab?e=cc.instantiate(t):t instanceof cc.Node&&(e=t);var o=e.getComponent(n.default);o?(e.parent=cc.director.getScene(),e.position=cc.v3(cc.winSize.width/2,cc.winSize.height/2),this.popupCptList.push(o),this.updatePopup()):cc.warn("\u5f39\u51fa\u7684\u8282\u70b9\u4e0d\u5305\u542b\u5f39\u7a97\u7ec4\u4ef6!",t.name)},t.prototype.removeAll=function(){for(var t=0,e=this.popupCptList;t<e.length;t++)e[t].node.destroy();this.popupCptList=[],this.updatePopup()},t._inst=null,t.POPUP_ZINDEX=1e3,t}();o.default=r,cc._RF.pop()},{"../Component/PopupCpt":"PopupCpt"}],PopupScaleInCpt:[function(t,e,o){"use strict";cc._RF.push(e,"99797VaKFdKk6gPFv9TkSU8","PopupScaleInCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.node.scale=.01,this.node.runAction(cc.scaleTo(.15,1).easing(cc.easeQuarticActionOut()))},c([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],PrefabCfgCpt:[function(t,e,o){"use strict";cc._RF.push(e,"1c4c1b9jMhMFbMci7Agd/0P","PrefabCfgCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=i.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config=[],e}return r(e,t),c([p([cc.Prefab])],e.prototype,"config",void 0),c([a,s("ECS/\u914d\u7f6e/\u9884\u5236\u4f53\u914d\u7f6e")],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],ResidentCpt:[function(t,e,o){"use strict";cc._RF.push(e,"752f4ihjihCUJ3OkBktR4ME","ResidentCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node)},c([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],ShopManCpt:[function(t,e,o){"use strict";cc._RF.push(e,"70000+UxRFCcI8JLdUqXUkX","ShopManCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),c([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],System:[function(t,e,o){"use strict";cc._RF.push(e,"5bd56hH8OhGxLGxm5JAZwHI","System");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.world=null,e}return r(e,t),e.prototype.onInit=function(){},e.prototype.onUpdate=function(){},e.prototype.getCpt=function(t,e){return this.world.getCpt(t,e)},e.prototype.getCpts=function(t,e){return this.world.getCpts(t,e)},c([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],TabbarEvtCpt:[function(t,e,o){"use strict";cc._RF.push(e,"446b4GcUU9E66eOA7bltbIK","TabbarEvtCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Event/EventManager"),a=cc._decorator,p=a.ccclass,s=a.property,u=a.menu,l=a.requireComponent,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="event_key",e.views=[],e}return r(e,t),e.prototype.onLoad=function(){this.toggleContainer=this.node.getComponent(cc.ToggleContainer);var t=new cc.Component.EventHandler;t.target=this.node,t.component="TabbarEvtCpt",t.handler="onClick",t.customEventData="",this.toggleContainer.checkEvents.push(t)},e.prototype.onClick=function(t){for(var e=this.toggleContainer.toggleItems.indexOf(t),o=0,n=this.views;o<n.length;o++)n[o].active=!1;this.views[e]&&(this.views[e].active=!0),i.default.inst.dispatch(this.key,e)},c([s],e.prototype,"key",void 0),c([s([cc.Node])],e.prototype,"views",void 0),c([p,u("ECS/\u53d1\u5c04\u5668/\u9009\u578b\u5361\u53d1\u5c04\u5668"),l(cc.ToggleContainer)],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Event/EventManager":"EventManager"}],ToastManager:[function(t,e,o){"use strict";cc._RF.push(e,"426fehWAbhC55ZcSw2VAIuR","ToastManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.toast=function(t,e){var o=this;e=e||cc.v3(cc.winSize.width/2,cc.winSize.height-80,0),this.toastNode&&(this.toastNode.destroy(),this.toastNode=null);var n=cc.size(300,50);this.toastNode=new cc.Node,this.toastNode.parent=cc.director.getScene();var r=this.toastNode.addComponent(cc.Graphics);r.fillColor=new cc.Color(0,0,0),r.fillRect(-n.width/2,-n.height/2,n.width,n.height),this.toastNode.position=e;var c=new cc.Node;c.parent=this.toastNode;var i=c.addComponent(cc.Label);i.string=t,i.fontSize=25,i.verticalAlign=cc.Label.VerticalAlign.CENTER,i.horizontalAlign=cc.Label.HorizontalAlign.CENTER,this.toastNode.scale=.1,this.toastNode.runAction(cc.scaleTo(.2,1).easing(cc.easeQuarticActionOut())),cc.tween(this.toastNode).delay(3).call(function(){o.toastNode&&(o.toastNode.destroy(),o.toastNode=null)}).start()},t._inst=null,t}();o.default=n,cc._RF.pop()},{}],ToggleEvtCpt:[function(t,e,o){"use strict";cc._RF.push(e,"fb6f5A7idNFtJrXJHVbBJ9s","ToggleEvtCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Event/EventManager"),a=cc._decorator,p=a.ccclass,s=a.property,u=a.menu,l=a.requireComponent,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="event_key",e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.node.on("toggle",function(){i.default.inst.dispatch(t.key,t.node.getComponent(cc.Toggle))},this)},c([s],e.prototype,"key",void 0),c([p,u("ECS/\u53d1\u5c04\u5668/\u5f00\u5173\u53d1\u5c04\u5668"),l(cc.Toggle)],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Event/EventManager":"EventManager"}],Tools:[function(t,e,o){"use strict";cc._RF.push(e,"24782U/bgNB45ePWiQ8pmim","Tools"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.getPromise=function(t,e){var o;return{promise:new Promise(function(e,n){o=n,t(e,n)}),abort:function(){e&&e(),o({message:"the promise is aborted"})}}},t.delay=function(e,o,n){var r=t.getPromise(function(t){e.scheduleOnce(function(){t()},o)}),c=r.promise,i=r.abort;return n&&n.push(i),c},t}();o.default=n,cc._RF.pop()},{}],TotemCpt:[function(t,e,o){"use strict";cc._RF.push(e,"37e0bOhJMtBooDQeRcdpmsr","TotemCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),c([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],WeaponCpt:[function(t,e,o){"use strict";cc._RF.push(e,"275e8eav9NFEIwpxW0BLqvL","WeaponCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,p=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueLabel=null,e._value=0,e}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.valueLabel.string=t.toString()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){Math.random()>.5?this.value+=1:this.value-=1},c([p(cc.Label)],e.prototype,"valueLabel",void 0),c([p],e.prototype,"_value",void 0),c([p],e.prototype,"value",null),c([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],World:[function(t,e,o){"use strict";cc._RF.push(e,"f63d1acW7NHU5HvsiAfmwVA","World");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./System"),a=t("./KeyCpt"),p=t("./PrefabCfgCpt"),s=cc._decorator,u=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeScale=1,e.systemList=[],e}return r(e,t),e.prototype.onLoad=function(){this.systemList=this.systemList.concat(this.node.getComponentsInChildren(i.default));for(var t=0,e=this.systemList;t<e.length;t++){var o=e[t];cc.log("\u6302\u8f7dSystem : ",o.name),o.world=this,o.onInit()}this.onInit()},e.prototype.onInit=function(){},e.prototype.update=function(t){t*=this.timeScale,this.onUpdate(t);for(var e=0,o=this.systemList;e<o.length;e++)o[e].onUpdate(t)},e.prototype.getSystem=function(t){var e=this.node.getComponent(t);return e||(e=cc.find("InitBase").getComponent(t)),e||(e=this.node.getComponentInChildren(t)),e},e.prototype.getCpt=function(t,e){return this.getCpts(t,e)[0]},e.prototype.getCpts=function(t,e){for(var o=[],n=0,r=cc.director.getScene().getComponentsInChildren(t);n<r.length;n++){var c=r[n];e?e(c)&&o.push(c):o.push(c)}return o},e.prototype.onUpdate=function(){},e.prototype.getCptByKey=function(t,e){return this.getCpt(t,function(t){var o=t.getComponent(a.default);return!(!o||o.key!=e)||!(!t.key||t.key!=e)||void 0})},e.prototype.getCptsByKey=function(t,e){return this.getCpts(t,function(t){var o=t.getComponent(a.default);return!(!o||o.key!=e)||!(!t.key||t.key!=e)||void 0})},e.prototype.getPrefab=function(t){var e=this.getComponent(p.default);if(e)for(var o=0,n=e.config;o<n.length;o++){var r=n[o];if(r.name==t)return r}else cc.warn("\u6ca1\u6709\u53d1\u73b0\u9884\u5236\u4f53\u914d\u7f6e\u7ec4\u4ef6")},c([u],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./KeyCpt":"KeyCpt","./PrefabCfgCpt":"PrefabCfgCpt","./System":"System"}],use_reversed_rotateBy:[function(t,e){"use strict";cc._RF.push(e,"6e9c2OQXSFJQ4RpmZY3gxzK","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}]},{},["CardBaseCpt","CardLayoutCpt","CardTownGameWorld","MoraleCpt","GameWorld","FoodCpt","GoldCpt","HeroCpt","MonsterCpt","ShopManCpt","TotemCpt","WeaponCpt","BrickCpt","GameMapCpt","GameMapItem","AnimCpt","ButtonEventCpt","DialogCpt","IdCpt","PopupCpt","PopupScaleInCpt","ResidentCpt","AnimSystem","AudioCfgCpt","BtnEvtCpt","KeyCpt","PrefabCfgCpt","System","TabbarEvtCpt","ToggleEvtCpt","World","EventCpt","EventManager","FSM","PopupManager","ToastManager","Tools","use_reversed_rotateBy"]);