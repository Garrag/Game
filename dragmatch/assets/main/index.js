window.__require=function t(e,o,n){function r(i,s){if(!o[i]){if(!e[i]){var p=i.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!s&&a)return a(p,!0);if(c)return c(p,!0);throw new Error("Cannot find module '"+i+"'")}i=p}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return r(e[i][1][t]||t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({AnimCpt:[function(t,e,o){"use strict";cc._RF.push(e,"a8d279MOnZL2ZC4+G4XaKPO","AnimCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){var t=this,e=this.getComponent(cc.Animation);e&&e.play(),e.on("finished",function(){t.node.destroy()},this)},e.prototype.onPlay=function(){},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],ButtonEventCpt:[function(t,e,o){"use strict";cc._RF.push(e,"e059fYHEfZGjKfD5jpJww7h","ButtonEventCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../System/EventSystem"),s=cc._decorator,p=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="event_key",e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.node.on("click",function(){var e=cc.find("Canvas").getComponent(i.default);e&&e.dispatchEvent(t.key)},this)},c([a],e.prototype,"key",void 0),c([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../System/EventSystem":"EventSystem"}],DialogCpt:[function(t,e,o){"use strict";cc._RF.push(e,"04a6e2sf29Cs6ZasES1qzTK","DialogCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentLabel=null,e._content="",e.okButton=null,e}return r(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.contentLabel&&(this.contentLabel.string=t)},enumerable:!1,configurable:!0}),c([p(cc.Label)],e.prototype,"contentLabel",void 0),c([p(cc.Button)],e.prototype,"okButton",void 0),c([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],DragBallCpt:[function(t,e,o){"use strict";cc._RF.push(e,"d303ayh8RNJ6beWL/T67lXc","DragBallCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BallState=void 0;var i,s=t("./HeroCpt"),p=cc._decorator,a=p.ccclass,u=p.property;(function(t){t[t.idle=0]="idle",t[t.to=1]="to",t[t.drag=2]="drag",t[t.back=3]="back"})(i=o.BallState||(o.BallState={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=i.idle,e.velocity=cc.Vec3.ZERO,e.gm=null,e.basePos=null,e.hero=null,e}return r(e,t),e.prototype.start=function(){cc.Camera.main.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStartCallback,this,!0),cc.Camera.main.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoveCallback,this,!0),cc.Camera.main.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEndCallback,this,!0),cc.Camera.main.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEndCallback,this,!0)},e.prototype.update=function(t){switch(this.state){case i.idle:break;case i.to:if(this.node.position=this.node.position.add(this.velocity.mul(2e3*t)),this.hero){this.state=i.drag;break}if(this.basePos.sub(this.node.position).mag()>1e3){this.state=i.back;break}break;case i.drag:this.node.position=this.node.position.add(cc.v3(0,-100).mulSelf(t)),this.node.position.y<=this.basePos.y&&(this.state=i.back);break;case i.back:var e=this.basePos.sub(this.node.position).normalize();this.node.position=this.node.position.add(e.mul(2e3*t)),this.basePos.sub(this.node.position).mag()<16&&(this.node.position=this.basePos,this.state=i.idle)}},e.prototype.onTouchStartCallback=function(t){if(this.state==i.idle){var e=cc.v3(cc.Camera.main.node.convertToNodeSpaceAR(t.getLocation())).sub(this.node.position);this.velocity=e.normalizeSelf(),this.state=i.to}},e.prototype.onTouchMoveCallback=function(){},e.prototype.onTouchEndCallback=function(){},e.prototype.onCollisionEnter=function(t){this.hero=t.node.getComponent(s.default)},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},c([u({type:cc.Enum(i)})],e.prototype,"state",void 0),c([a],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./HeroCpt":"HeroCpt"}],DropEffectCpt:[function(t,e,o){"use strict";cc._RF.push(e,"b9446z2ra5H77XDZ7Oik50W","DropEffectCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.floor=0,e.velocity=cc.Vec3.ZERO,e.gravity=cc.v3(0,-100),e.isMoving=!1,e}return r(e,t),e.prototype.start=function(){},e.prototype.update=function(t){this.isMoving||(this.velocity.addSelf(this.gravity),this.node.position=this.node.position.add(this.velocity.mul(t)),this.node.position.y<this.floor&&(this.velocity.x*=.8,this.velocity.y*=-.8,this.node.position=cc.v3(this.node.position.x,this.floor)))},e.prototype.toEnd=function(t){var e,o=this,n=(t=t||{}).toPos,r=t.delay||0,c=t.callback,i=t.animTime||1,s=n.sub(this.node.position);e=s.x>0?s.mul(.7*Math.random()).add(s.rotate(90).normalize().mul(400*Math.random())):s.mul(.7*Math.random()).add(s.rotate(-90).normalize().mul(400*Math.random()));var p=[this.node.position,e,n];this.node.runAction(cc.sequence(cc.delayTime(r),cc.callFunc(function(){o.isMoving=!0}),cc.bezierTo(i,p).easing(cc.easeSineIn()),cc.callFunc(function(){c&&c()}),cc.removeSelf()))},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],EventSystem:[function(t,e,o){"use strict";cc._RF.push(e,"eece2P7N3RCbZhmZyUH6k7T","EventSystem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../ECS/System"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.addEvent=function(t,e,o){this.node.on(t,e,o)},e.prototype.addEventOnce=function(t,e,o){this.node.once(t,e,o)},e.prototype.removeEvent=function(t,e,o){this.node.off(t,e,o)},e.prototype.dispatchEvent=function(t,e){this.node.emit(t,e)},e.prototype.onUpdate=function(){},c([p],e)}(i.default));o.default=a,cc._RF.pop()},{"../../ECS/System":"System"}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"70d3ct8Wv1Ci44RbuWBAMTu","GameManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./GameMapItem"),s=t("./HeroCpt"),p=t("../../Lemon/ECS/World"),a=t("../../Lemon/Script/System/PopupSystem"),u=t("./DropEffectCpt"),f=t("../../Lemon/Script/System/EventSystem"),l=10,h=cc._decorator,d=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heroPrefab=null,e.mapItemPrefab=null,e.progress=null,e.scoreLabel=null,e.boomPrefab=null,e.poomPrefab=null,e.goldPrefab=null,e.heroList=new Array,e.map=new Array,e.paddingTime=4,e.indexTime=4,e.timeSpeed=1,e.isGameOver=!1,e.tempAddTime=0,e.tempscore=0,e._score=0,e}return r(e,t),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(t){this._score=t,this.paddingTime=4-Math.min(3,t/50),this.scoreLabel&&(this.scoreLabel.string=t+"")},enumerable:!1,configurable:!0}),e.prototype.start=function(){for(var t=this,e=0;e<6;e++){this.map[e]=new Array;for(var o=0;o<l;o++){var n=cc.instantiate(this.mapItemPrefab);n.parent=this.node,n.position=cc.v3(cc.v3((-2.5+e)*i.default.width,(-4.5+o+-1)*i.default.height));var r=n.getComponent(i.default);this.map[e][o]=r,0==e&&9==o?r.cornerSprite.node.active=!0:5==e&&9==o?(r.cornerSprite.node.active=!0,r.cornerSprite.node.rotation=90):0==e&&0==o?(r.cornerSprite.node.active=!0,r.cornerSprite.node.rotation=270):5==e&&0==o&&(r.cornerSprite.node.active=!0,r.cornerSprite.node.rotation=180)}}for(var c=0;c<l;c++)for(var s=0;s<6;s++)if(s+1<6){var p=this.map[s][c],a=this.map[s+1][c];p.right=a,a.left=p}for(s=0;s<6;s++)for(c=0;c<l;c++)c+1<l&&(p=this.map[s][c],a=this.map[s][c+1],p.up=a,a.down=p);for(this.createHeroRow(),s=0;s<2;s++)this.scheduleOnce(function(){t.moveUp()},.1*s);this.getSystem(f.default).addEvent("drag_hero",function(e){t.timeSpeed=e?4:1})},e.prototype.onUpdate=function(t){if(!this.isGameOver){for(var e=0,o=this.heroList;e<o.length;e++)(c=o[e]).isReady=this.checkHero(c);for(var n=0,r=this.heroList;n<r.length;n++){var c;(c=r[n]).isReady&&c.fixTime>.3&&(c.isBoom=!0)}this.progress.progress=(this.paddingTime-this.indexTime)/this.paddingTime,this.indexTime>0?this.indexTime-=t*this.timeSpeed:(this.createHeroOne(Math.floor(6*Math.random()),9),this.indexTime=this.paddingTime),this.isOver()&&(this.getSystem(a.default).addDialog("GameOver",{clickCallback:function(){cc.director.loadScene("MainScene")}}),this.isGameOver=!0),this.tempscore>0&&(this.tempAddTime+=t,this.tempAddTime>.05&&(this.tempscore--,this.score++,this.tempAddTime=0))}},e.prototype.lateUpdate=function(){for(var t=this,e=0,o=function(o){if(o.isBoom){o.mapItem.hero=null,n.heroList=n.heroList.filter(function(t){return t!==o});var r=o.node;o.unbinding(),r.runAction(cc.sequence(cc.scaleTo(.1,.8),cc.callFunc(function(){for(var o=0;o<3;o++){var n=cc.instantiate(t.goldPrefab);n.parent=t.node,n.zIndex=101,n.position=r.position.add(cc.v3(0,50)),n.getComponent(u.default).floor=r.position.y-50+40*Math.random(),n.getComponent(u.default).velocity=cc.v3(250*(Math.random()-.5),1e3*Math.random()),n.getComponent(u.default).toEnd({delay:1.3+.1*e++,toPos:cc.v2(0,500),animTime:.8,callback:function(){t.tempscore++}})}var c=cc.instantiate(t.boomPrefab);c.parent=t.node,c.zIndex=100,c.position=r.position,r.destroy()})))}},n=this,r=0,c=this.heroList;r<c.length;r++)o(c[r])},e.prototype.isOver=function(){for(var t=0;t<6;t++){for(var e=0,o=0;o<l;o++){var n=this.map[t][o];n.hero&&n.hero.state==s.HeroState.check&&e++}if(e>=l)return!0}return!1},e.prototype.checkHero=function(t){var e=1,o=function(t,n){t.state==s.HeroState.check&&t.mapItem[n]&&t.mapItem[n].hero&&t.mapItem[n].hero.state==s.HeroState.check&&t.mapItem[n].hero.type==t.type&&(e++,o(t.mapItem[n].hero,n))};return o(t,"left"),o(t,"right"),e>=3||(e=1,o(t,"up"),o(t,"down"),e>=3)},e.prototype.moveUp=function(){for(var t=0;t<6;t++)for(var e=9;e>=0;e--)this.map[t][e].hero&&this.map[t][e].hero.mapItem.up&&this.map[t][e].hero.binding(this.map[t][e].hero.mapItem.up);this.createHeroRow()},e.prototype.createHeroRow=function(){for(var t=0;t<6;t++)this.createHeroOne(t,0)},e.prototype.createHeroOne=function(t,e){var o=cc.instantiate(this.heroPrefab);o.parent=this.node;var n=this.map[t][e],r=o.getComponent(s.default);r.gm=this,r.mapItem=n,r.binding(n),r.updatePos(),this.heroList.push(r);var c=[0,1,2,3,4];c.sort(function(){return.5-Math.random()});for(var i=1;i<=c.length&&(r.state=s.HeroState.check,r.type=c[i],this.checkHero(r));i++);},e.prototype.getMapItemByPostion=function(t){for(var e=null,o=0;o<6;o++)for(var n=0;n<l;n++)this.map[o][n]&&this.map[o][n].node.getBoundingBox().contains(cc.v2(t))&&(e=this.map[o][n]);return e},c([y(cc.Prefab)],e.prototype,"heroPrefab",void 0),c([y(cc.Prefab)],e.prototype,"mapItemPrefab",void 0),c([y(cc.ProgressBar)],e.prototype,"progress",void 0),c([y(cc.Label)],e.prototype,"scoreLabel",void 0),c([y(cc.Prefab)],e.prototype,"boomPrefab",void 0),c([y(cc.Prefab)],e.prototype,"poomPrefab",void 0),c([y(cc.Prefab)],e.prototype,"goldPrefab",void 0),c([d],e)}(p.default);o.default=m,cc._RF.pop()},{"../../Lemon/ECS/World":"World","../../Lemon/Script/System/EventSystem":"EventSystem","../../Lemon/Script/System/PopupSystem":"PopupSystem","./DropEffectCpt":"DropEffectCpt","./GameMapItem":"GameMapItem","./HeroCpt":"HeroCpt"}],GameMapItem:[function(t,e,o){"use strict";cc._RF.push(e,"ae32cr/We9JRYZW7AtCyo7A","GameMapItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./HeroCpt"),s=cc._decorator,p=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.busySprite=null,e.cornerSprite=null,e}return r(e,t),e.prototype.update=function(){this.hero&&this.hero.state==i.HeroState.drag?this.busySprite.node.active=!0:this.busySprite.node.active=!1},e.width=100,e.height=100,c([a(cc.Sprite)],e.prototype,"busySprite",void 0),c([a(cc.Sprite)],e.prototype,"cornerSprite",void 0),c([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./HeroCpt":"HeroCpt"}],HeroCpt:[function(t,e,o){"use strict";cc._RF.push(e,"d27b77KET5Npbp2EufTvj7f","HeroCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.HeroState=void 0;var i,s=t("../../Lemon/Script/System/EventSystem"),p=cc._decorator,a=p.ccclass,u=p.property;(function(t){t.check="check",t.droping="drop",t.fixing="fix",t.drag="drag"})(i=o.HeroState||(o.HeroState={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=i.check,e.gm=null,e.mapItem=null,e.sprite=null,e.spriteFrameList=[],e.debugLabel=null,e.isBoom=!1,e.isReady=!1,e.dragMoving=!1,e._type=1,e.vec=cc.v3(0,-600),e.frameCount=0,e.fixTime=0,e}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this.sprite.spriteFrame=this.spriteFrameList[this._type]},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStartCallback,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoveCallback,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEndCallback,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEndCallback,this,!0)},e.prototype.binding=function(t){this.mapItem.hero&&(this.mapItem.hero=null),t.hero=this,this.mapItem=t},e.prototype.unbinding=function(){this.mapItem.hero&&(this.mapItem.hero=null),this.mapItem=null},e.prototype.updatePos=function(){this.node.position=this.mapItem.node.position},e.prototype.updatePosByTime=function(t,e){this.node.stopAllActions();var o=cc.sequence(cc.moveTo(t,cc.v2(this.mapItem.node.position)),cc.callFunc(function(){e()}));return this.node.runAction(o)},e.prototype.onTouchStartCallback=function(t){this.canDrag()&&(this.currentPos=cc.v3(this.gm.node.convertToNodeSpaceAR(t.getLocation())))},e.prototype.onTouchMoveCallback=function(t){this.state==i.drag&&(this.currentPos=cc.v3(this.gm.node.convertToNodeSpaceAR(t.getLocation())))},e.prototype.onTouchEndCallback=function(){this.currentPos=null},e.prototype.update=function(t){if(this.mapItem)switch(this.frameCount>=3?this.frameCount=0:this.frameCount++,this.state){case i.check:this.currentPos?(this.fixTime=0,this.state=i.drag):this.mapItem.node.position.sub(this.node.position).mag()>10?(this.state=i.fixing,this.fixTime=0):this.canMove()?(this.state=i.droping,this.fixTime=0):(this.updatePos(),this.node.zIndex=1,this.isReady&&(this.frameCount%3==0&&(this.node.position=this.mapItem.node.position.add(cc.v3(5*Math.sin(Math.PI*Math.random()),5*Math.sin(Math.PI*Math.random())))),this.fixTime+=t));break;case i.droping:this.node.position=this.node.position.add(this.vec.mul(t)),this.node.position.y<=this.mapItem.node.position.y&&(this.canMove()?this.binding(this.mapItem.down):this.state=i.check);break;case i.fixing:var e=this.mapItem.node.position.sub(this.node.position);e.mag()>15?this.node.position=this.node.position.add(e.normalize().mul(20)):(this.updatePos(),this.state=i.check);break;case i.drag:if(!this.currentPos){cc.find("Canvas").getComponent(s.default).dispatchEvent("drag_hero",!1),this.state=i.fixing;break}cc.find("Canvas").getComponent(s.default).dispatchEvent("drag_hero",!0);var o=this.currentPos.sub(this.node.position);this.node.zIndex=10,this.node.position=this.node.position.add(o.normalize().mul(Math.min(50,o.mag())));var n=this.gm.getMapItemByPostion(this.node.position);n&&null==n.hero&&this.binding(n)}},e.prototype.canMove=function(){return null!=this.mapItem&&null!=this.mapItem.down&&null==this.mapItem.down.hero},e.prototype.canDrag=function(){return this.state==i.check&&null!=this.mapItem&&null!=this.mapItem.up&&null==this.mapItem.up.hero},c([u(cc.Sprite)],e.prototype,"sprite",void 0),c([u(cc.SpriteFrame)],e.prototype,"spriteFrameList",void 0),c([u(cc.Label)],e.prototype,"debugLabel",void 0),c([u],e.prototype,"type",null),c([a],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../Lemon/Script/System/EventSystem":"EventSystem"}],IdCpt:[function(t,e,o){"use strict";cc._RF.push(e,"d688aPaKmJGEK/8OIcFjhFd","IdCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e}return r(e,t),c([p],e.prototype,"id",void 0),c([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],MainWorld:[function(t,e,o){"use strict";cc._RF.push(e,"96eb2Ey+qxASorzjboU9fHU","MainWorld");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Lemon/ECS/World"),s=t("../../Lemon/Script/System/EventSystem"),p=cc._decorator,a=p.ccclass,u=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.getSystem(s.default).addEvent("start_game",function(){cc.director.loadScene("GameScene")})},e.prototype.onUpdate=function(){},c([a],e)}(i.default));o.default=u,cc._RF.pop()},{"../../Lemon/ECS/World":"World","../../Lemon/Script/System/EventSystem":"EventSystem"}],MapBorderCpt:[function(t,e,o){"use strict";cc._RF.push(e,"d362dpz2dFO45jfU5hE/7Iw","MapBorderCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphics=null,e}return r(e,t),e.prototype.onLoad=function(){this.graphics=this.addComponent(cc.Graphics)},e.prototype.start=function(){this.graphics.lineWidth=8,this.graphics.strokeColor=(new cc.Color).fromHEX("#f3d040"),this.graphics.rect(-305,-505,610,1010),this.graphics.stroke()},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],PopupCpt:[function(t,e,o){"use strict";cc._RF.push(e,"34d848p/DhEea5oaPZOrtZ5","PopupCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOpen=!1,e.index=1,e.closeMaskTouch=!1,e}return r(e,t),c([p],e.prototype,"isOpen",void 0),c([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PopupScaleInCpt:[function(t,e,o){"use strict";cc._RF.push(e,"99797VaKFdKk6gPFv9TkSU8","PopupScaleInCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.node.scale=.01,this.node.runAction(cc.scaleTo(.15,1).easing(cc.easeQuarticActionOut()))},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],PopupSystem:[function(t,e,o){"use strict";cc._RF.push(e,"f3a11T+E5tF0JbaqqQrXwxj","PopupSystem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Component/PopupCpt"),s=t("../Component/DialogCpt"),p=t("../Component/PopupScaleInCpt"),a=t("../../ECS/System"),u=cc._decorator,f=u.ccclass,l=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogPrefab=null,e.maskNode=null,e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.maskNode=new cc.Node,this.maskNode.parent=cc.director.getScene();var e=this.maskNode.addComponent(cc.Graphics);e.fillColor=new cc.Color(0,0,0,155),e.fillRect(-cc.winSize.width/2,-cc.winSize.height/2,cc.winSize.width,cc.winSize.height),this.maskNode.width=cc.winSize.width,this.maskNode.height=cc.winSize.height,this.maskNode.position=cc.v3(cc.winSize.width/2,cc.winSize.height/2,0),this.maskNode.active=!1,this.maskNode.zIndex=-100,this.maskNode.on(cc.Node.EventType.TOUCH_END,function(){t.getTopPopup().closeMaskTouch||t.removeTopPopup()},this),cc.game.addPersistRootNode(this.maskNode)},e.prototype.onDialogClickOk=function(t){cc.log(t)},e.prototype.getTopPopup=function(){var t=this.getCpts(i.default,function(t){return 0==t.isOpen});return t.sort(function(t,e){return t.index-e.index}),t.pop()},e.prototype.removeTopPopup=function(){var t=this.getTopPopup();t&&t.node.destroy(),this.scheduleOnce(this.onUpdatePopup)},e.prototype.onUpdatePopup=function(){var t=this.getCpts(i.default,function(t){return 0==t.isOpen});if(t.sort(function(t,e){return t.index-e.index}),t.length>0)for(var e=0;e<t.length;e++){var o=t[e];this.maskNode.active=!0,o.node.zIndex=1e3+2*o.index,e==t.length-1&&(this.maskNode.zIndex=1e3+2*o.index-1)}else this.maskNode.active=!1,this.maskNode.zIndex=-100},e.prototype.addPopupByNode=function(t,e){e=e||{};var o=this.getCpts(i.default),n=t.addComponent(i.default);n.isOpen=!1,n.index=o.length+1,e.closeMaskTouch&&(n.closeMaskTouch=e.closeMaskTouch),this.onUpdatePopup()},e.prototype.addDialog=function(t,e){var o=this;e=e||{};var n=cc.instantiate(this.dialogPrefab);n.parent=cc.director.getScene(),n.position=cc.v3(cc.winSize.width/2,cc.winSize.height/2,0),n.addComponent(p.default);var r=n.getComponent(s.default);r.content=t,r.okButton.node.on("click",function(){o.removeTopPopup(),e.clickCallback&&e.clickCallback()}),this.addPopupByNode(n,e)},c([l(cc.Prefab)],e.prototype,"dialogPrefab",void 0),c([f],e)}(a.default);o.default=h,cc._RF.pop()},{"../../ECS/System":"System","../Component/DialogCpt":"DialogCpt","../Component/PopupCpt":"PopupCpt","../Component/PopupScaleInCpt":"PopupScaleInCpt"}],ResidentCpt:[function(t,e,o){"use strict";cc._RF.push(e,"752f4ihjihCUJ3OkBktR4ME","ResidentCpt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node)},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],System:[function(t,e,o){"use strict";cc._RF.push(e,"5bd56hH8OhGxLGxm5JAZwHI","System");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.world=null,e}return r(e,t),e.prototype.onInit=function(){},e.prototype.onUpdate=function(){},e.prototype.getCpt=function(t,e){return this.world.getCpt(t,e)},e.prototype.getCpts=function(t,e){return this.world.getCpts(t,e)},e.prototype.getCptById=function(t){return this.world.getCptById(t)},e.prototype.toWorldPos=function(t){return this.world.toWorldPos(t)},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],TestWorld:[function(t,e,o){"use strict";cc._RF.push(e,"e1803crFkhG26haPU1ZcBKm","TestWorld");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../ECS/World"),s=t("./System/EventSystem"),p=t("./System/PopupSystem"),a=t("./System/ToastSystem"),u=cc._decorator,f=u.ccclass,l=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e}return r(e,t),e.prototype.start=function(){var t=this;this.getSystem(s.default).addEvent("test_dialog",function(){t.getSystem(p.default).addDialog("\u6e38\u620f\u7ed3\u675f",{clickCallback:function(){}}),t.getSystem(a.default).toast("TEST,TEST")});for(var e=0;e<1e3;e++){var o=cc.instantiate(this.prefab);o.parent=this.node,o.position=cc.v3(100*(2*Math.random()-1),100*(2*Math.random()-1),0)}},e.prototype.onUpdate=function(){},c([l(cc.Prefab)],e.prototype,"prefab",void 0),c([f],e)}(i.default);o.default=h,cc._RF.pop()},{"../ECS/World":"World","./System/EventSystem":"EventSystem","./System/PopupSystem":"PopupSystem","./System/ToastSystem":"ToastSystem"}],ToastSystem:[function(t,e,o){"use strict";cc._RF.push(e,"faada9wrWtO4qePvlnCKq8n","ToastSystem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../ECS/System"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toast=function(t,e){var o=this;e=e||cc.v3(cc.winSize.width/2,cc.winSize.height-80,0),this.toastNode&&(this.toastNode.destroy(),this.toastNode=null);var n=cc.size(300,50);this.toastNode=new cc.Node,this.toastNode.parent=cc.director.getScene();var r=this.toastNode.addComponent(cc.Graphics);r.fillColor=new cc.Color(0,0,0),r.fillRect(-n.width/2,-n.height/2,n.width,n.height),this.toastNode.position=e;var c=new cc.Node;c.parent=this.toastNode;var i=c.addComponent(cc.Label);i.string=t,i.fontSize=25,i.verticalAlign=cc.Label.VerticalAlign.CENTER,i.horizontalAlign=cc.Label.HorizontalAlign.CENTER,this.toastNode.scale=.1,this.toastNode.runAction(cc.scaleTo(.2,1).easing(cc.easeQuarticActionOut())),this.scheduleOnce(function(){o.toastNode&&(o.toastNode.destroy(),o.toastNode=null)},3)},c([p],e)}(i.default));o.default=a,cc._RF.pop()},{"../../ECS/System":"System"}],World:[function(t,e,o){"use strict";cc._RF.push(e,"f63d1acW7NHU5HvsiAfmwVA","World");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./System"),s=t("../Script/Component/IdCpt"),p=cc._decorator,a=p.ccclass,u=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeScale=1,e.systemList=[],e}return r(e,t),e.prototype.onLoad=function(){this.systemList=cc.find("InitBase").getComponents(i.default),this.systemList=this.systemList.concat(this.node.getComponentsInChildren(i.default));for(var t=0,e=this.systemList;t<e.length;t++){var o=e[t];cc.log("\u6302\u8f7dSystem : ",o.name),o.world=this,o.onInit()}},e.prototype.update=function(t){t*=this.timeScale,this.onUpdate(t);for(var e=0,o=this.systemList;e<o.length;e++)o[e].onUpdate(t)},e.prototype.getSystem=function(t){var e=this.node.getComponent(t);return e||(e=cc.find("InitBase").getComponent(t)),e||(e=this.node.getComponentInChildren(t)),e},e.prototype.getCpt=function(t,e){return this.getCpts(t,e)[0]},e.prototype.getCpts=function(t,e){for(var o=[],n=0,r=cc.director.getScene().getComponentsInChildren(t);n<r.length;n++){var c=r[n];e?e(c)&&o.push(c):o.push(c)}return o},e.prototype.getCptById=function(t){return this.getCpt(s.default,function(e){return e.id==t})},e.prototype.onUpdate=function(){},e.prototype.toWorldPos=function(t){return this.node.convertToNodeSpaceAR(t)},c([a],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../Script/Component/IdCpt":"IdCpt","./System":"System"}],use_reversed_rotateBy:[function(t,e){"use strict";cc._RF.push(e,"6e9c2OQXSFJQ4RpmZY3gxzK","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}]},{},["AnimCpt","DragBallCpt","DropEffectCpt","GameManager","GameMapItem","HeroCpt","MainWorld","MapBorderCpt","System","World","ButtonEventCpt","DialogCpt","IdCpt","PopupCpt","PopupScaleInCpt","ResidentCpt","EventSystem","PopupSystem","ToastSystem","TestWorld","use_reversed_rotateBy"]);